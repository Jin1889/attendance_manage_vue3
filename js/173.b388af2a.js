"use strict";(self["webpackChunkattendance_manage_vue3"]=self["webpackChunkattendance_manage_vue3"]||[]).push([[173],{2173:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var l=t(7988),n=(t(1844),t(8131)),o=(t(2064),t(7113),t(9866)),r=(t(172),t(6355)),u=(t(3069),t(8061)),i=(t(6905),t(2563)),d=(t(5885),t(9007),t(5791)),s=(t(6809),t(3396)),c=t(4870),m=t(2748);const f={class:"dialog-footer"};var p=(0,s.aZ)({__name:"RoleView",setup(e){const{proxy:a}=(0,s.FN)(),t=(0,c.iH)(),p=(0,c.iH)([]);let v=(0,c.iH)(1),w=(0,c.iH)([10,15,20]),_=(0,c.iH)(10),g=(0,c.iH)(0),U=(0,c.qj)({formData:{role_name:""}}),y=(0,c.iH)(!1),W=(0,c.iH)(!1);const k=(0,c.iH)("6rem"),h=async()=>{const{data:e}=await a.$http.get("attendance/role");if(200!==e.status)return alert("获取数据失败");p.value=e.data.slice((v.value-1)*_.value,v.value*_.value),g.value=e.data.length};h();const b=e=>{e?.resetFields()};function C(){y.value=!0,W.value=!0,(0,s.Y3)((()=>{b(t.value),delete U.formData.id}))}async function H(e){y.value=!0,W.value=!1;const{data:t}=await a.$http.get(`attendance/role/${e}`);if(200!==t.status)return alert("获取该条数据失败");U.formData=t.data}async function z(){if(!1===W.value){const{data:e}=await a.$http.put(`attendance/role/${U.formData.id}`,U.formData);if(200!==e.status)return alert("更新失败")}else{const{data:e}=await a.$http.post("attendance/role",U.formData);if(200!==e.status)return alert("添加失败")}y.value=!1,h()}async function D(e){const{data:t}=await(a?.$http.delete(`attendance/role/${e}`));if(200!==t.status)return alert("删除失败");h()}function S(e){_.value=e,h()}function $(e){v.value=e,h()}return(e,a)=>{const W=d.mi,h=u.$Y,b=i.i1,V=u.eI,q=r.R,x=o.EZ,F=n.nH,R=n.ly,Y=l.d0;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(W,{class:"add",type:"primary",size:"small",plain:"",onClick:C},{default:(0,s.w5)((()=>[(0,s.Uk)("添加")])),_:1}),(0,s.Wm)(V,{data:p.value,stripe:"",border:"",style:{width:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{label:"#",type:"index"}),(0,s.Wm)(h,{prop:"role_name",label:"角色名称"}),(0,s.Wm)(h,{prop:"options",label:"操作"},{default:(0,s.w5)((e=>[(0,s.Wm)(W,{type:"primary",size:"small",onClick:a=>H(e.row.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("修改")])),_:2},1032,["onClick"]),(0,s.Wm)(b,{"confirm-button-text":"确认","cancel-button-text":"取消",icon:(0,c.SU)(m.WarnTriangleFilled),"icon-color":"red",title:"是否确定删除",onConfirm:a=>D(e.row.id)},{reference:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"delete",type:"danger",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"]),(0,s.Wm)(q,{"current-page":(0,c.SU)(v),"onUpdate:current-page":a[0]||(a[0]=e=>(0,c.dq)(v)?v.value=e:v=e),"page-sizes":(0,c.SU)(w),"page-size":(0,c.SU)(_),"onUpdate:page-size":a[1]||(a[1]=e=>(0,c.dq)(_)?_.value=e:_=e),layout:"total, sizes, prev, pager, next, jumper",total:(0,c.SU)(g),onSizeChange:S,onCurrentChange:$},null,8,["current-page","page-sizes","page-size","total"]),(0,s.Wm)(Y,{title:"角色信息",modelValue:(0,c.SU)(y),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,c.dq)(y)?y.value=e:y=e),modal:""},{footer:(0,s.w5)((()=>[(0,s._)("div",f,[(0,s.Wm)(W,{onClick:a[3]||(a[3]=e=>(0,c.dq)(y)?y.value=!1:y=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)("取 消")])),_:1}),(0,s.Wm)(W,{type:"primary",onClick:a[4]||(a[4]=e=>z())},{default:(0,s.w5)((()=>[(0,s.Uk)("确 定")])),_:1})])])),default:(0,s.w5)((()=>[(0,s.Wm)(R,{model:(0,c.SU)(U).formData,ref_key:"roleFormRef",ref:t},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{prop:"role_name",label:"角色名称","label-width":k.value},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{modelValue:(0,c.SU)(U).formData.role_name,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,c.SU)(U).formData.role_name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}}),v=t(89);const w=(0,v.Z)(p,[["__scopeId","data-v-292b600a"]]);var _=w}}]);
//# sourceMappingURL=173.b388af2a.js.map