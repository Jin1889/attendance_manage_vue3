"use strict";(self["webpackChunkattendance_manage_vue3"]=self["webpackChunkattendance_manage_vue3"]||[]).push([[650],{5650:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var n=t(7988),l=(t(1844),t(8131)),r=(t(2064),t(7113),t(9866)),o=(t(172),t(6355)),d=(t(3069),t(8061)),u=(t(6905),t(2563)),i=(t(5885),t(9007),t(5791)),m=(t(6809),t(3396)),s=t(4870),p=t(2748);const c={class:"dialog-footer"};var f=(0,m.aZ)({__name:"DepartmentView",setup(e){const{proxy:a}=(0,m.FN)(),t=(0,s.iH)(),f=(0,s.iH)([]);let v=(0,s.iH)(1),w=(0,s.iH)([10,15,20]),_=(0,s.iH)(10),g=(0,s.iH)(0),U=(0,s.qj)({formData:{id:0,department_name:""}}),y=(0,s.iH)(!1),W=(0,s.iH)(!1);const k=(0,s.iH)("6rem"),h=async()=>{const{data:e}=await a.$http.get("attendance/department");if(200!==e.status)return alert("获取数据失败");f.value=e.data.slice((v.value-1)*_.value,v.value*_.value),g.value=e.data.length};h();const C=e=>{e?.resetFields()};function b(){y.value=!0,W.value=!0,(0,m.Y3)((()=>{C(t.value),delete U.formData.id}))}async function D(e){y.value=!0,W.value=!1;const{data:t}=await a.$http.get(`attendance/department/${e}`);if(200!==t.status)return alert("获取该条数据失败");U.formData=t.data}async function H(){if(!1===W.value){const{data:e}=await a.$http.put(`attendance/department/${U.formData.id}`,U.formData);if(200!==e.status)return alert("更新失败")}else{const{data:e}=await a.$http.post("attendance/department",U.formData);if(200!==e.status)return alert("添加失败")}y.value=!1,h()}async function z(e){const{data:t}=await(a?.$http.delete(`attendance/department/${e}`));if(200!==t.status)return alert("删除失败");h()}function S(e){_.value=e,h()}function $(e){v.value=e,h()}return(e,a)=>{const W=i.mi,h=d.$Y,C=u.i1,V=d.eI,q=o.R,x=r.EZ,F=l.nH,Y=l.ly,Z=n.d0;return(0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m.Wm)(W,{class:"add",type:"primary",size:"small",plain:"",onClick:b},{default:(0,m.w5)((()=>[(0,m.Uk)("添加")])),_:1}),(0,m.Wm)(V,{data:f.value,stripe:"",border:"",style:{width:"100%"}},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{label:"#",type:"index"}),(0,m.Wm)(h,{prop:"department_name",label:"部门名称"}),(0,m.Wm)(h,{prop:"options",label:"操作"},{default:(0,m.w5)((e=>[(0,m.Wm)(W,{type:"primary",size:"small",onClick:a=>D(e.row.id)},{default:(0,m.w5)((()=>[(0,m.Uk)("修改")])),_:2},1032,["onClick"]),(0,m.Wm)(C,{"confirm-button-text":"确认","cancel-button-text":"取消",icon:(0,s.SU)(p.WarnTriangleFilled),"icon-color":"red",title:"是否确定删除",onConfirm:a=>z(e.row.id)},{reference:(0,m.w5)((()=>[(0,m.Wm)(W,{class:"delete",type:"danger",size:"small"},{default:(0,m.w5)((()=>[(0,m.Uk)("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"]),(0,m.Wm)(q,{"current-page":(0,s.SU)(v),"onUpdate:current-page":a[0]||(a[0]=e=>(0,s.dq)(v)?v.value=e:v=e),"page-sizes":(0,s.SU)(w),"page-size":(0,s.SU)(_),"onUpdate:page-size":a[1]||(a[1]=e=>(0,s.dq)(_)?_.value=e:_=e),layout:"total, sizes, prev, pager, next, jumper",total:(0,s.SU)(g),onSizeChange:S,onCurrentChange:$},null,8,["current-page","page-sizes","page-size","total"]),(0,m.Wm)(Z,{title:"部门信息",modelValue:(0,s.SU)(y),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,s.dq)(y)?y.value=e:y=e),modal:""},{footer:(0,m.w5)((()=>[(0,m._)("div",c,[(0,m.Wm)(W,{onClick:a[3]||(a[3]=e=>(0,s.dq)(y)?y.value=!1:y=!1)},{default:(0,m.w5)((()=>[(0,m.Uk)("取 消")])),_:1}),(0,m.Wm)(W,{type:"primary",onClick:a[4]||(a[4]=e=>H())},{default:(0,m.w5)((()=>[(0,m.Uk)("确 定")])),_:1})])])),default:(0,m.w5)((()=>[(0,m.Wm)(Y,{model:(0,s.SU)(U).formData,ref_key:"departmentFormRef",ref:t},{default:(0,m.w5)((()=>[(0,m.Wm)(F,{prop:"department_name",label:"部门","label-width":k.value},{default:(0,m.w5)((()=>[(0,m.Wm)(x,{modelValue:(0,s.SU)(U).formData.department_name,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,s.SU)(U).formData.department_name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}}),v=t(89);const w=(0,v.Z)(f,[["__scopeId","data-v-8d9f637a"]]);var _=w}}]);
//# sourceMappingURL=650.70588268.js.map