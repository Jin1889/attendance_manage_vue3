"use strict";(self["webpackChunkattendance_manage_vue3"]=self["webpackChunkattendance_manage_vue3"]||[]).push([[824],{7824:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var l=t(7988),n=(t(1844),t(8131)),o=(t(2064),t(7113),t(9866)),r=(t(172),t(6355)),u=(t(3069),t(8061)),i=(t(6905),t(2563)),d=(t(5885),t(9007),t(5791)),p=(t(6809),t(3396)),s=t(4870),m=t(2748);const c={class:"dialog-footer"};var f=(0,p.aZ)({__name:"LeaveView",setup(e){const{proxy:a}=(0,p.FN)(),t=(0,s.iH)(),f=(0,s.iH)([]);let v=(0,s.iH)(1),_=(0,s.iH)([10,15,20]),w=(0,s.iH)(10),W=(0,s.iH)(0),y=(0,s.qj)({formData:{leave_type:""}}),g=(0,s.iH)(!1),b=(0,s.iH)(!1);const U=(0,s.iH)("6rem"),h=async()=>{const{data:e}=await a.$http.get("attendance/leave");if(200!==e.status)return alert("获取数据失败");f.value=e.data.slice((v.value-1)*w.value,v.value*w.value),W.value=e.data.length};h();const k=e=>{e?.resetFields()};function C(){g.value=!0,b.value=!0,(0,p.Y3)((()=>{k(t.value),delete y.formData.id}))}async function H(e){g.value=!0,b.value=!1;const{data:t}=await a.$http.get(`attendance/leave/${e}`);if(200!==t.status)return alert("获取该条数据失败");y.formData=t.data}async function z(){if(!1===b.value){const{data:e}=await a.$http.put(`attendance/leave/${y.formData.id}`,y.formData);if(200!==e.status)return alert("更新失败")}else{const{data:e}=await a.$http.post("attendance/leave",y.formData);if(200!==e.status)return alert("添加失败")}g.value=!1,h()}async function D(e){const{data:t}=await(a?.$http.delete(`attendance/leave/${e}`));if(200!==t.status)return alert("删除失败");h()}function S(e){w.value=e,h()}function $(e){v.value=e,h()}return(e,a)=>{const b=d.mi,h=u.$Y,k=i.i1,V=u.eI,q=r.R,x=o.EZ,F=n.nH,Y=n.ly,Z=l.d0;return(0,p.wg)(),(0,p.iD)(p.HY,null,[(0,p.Wm)(b,{class:"add",type:"primary",size:"small",plain:"",onClick:C},{default:(0,p.w5)((()=>[(0,p.Uk)("添加")])),_:1}),(0,p.Wm)(V,{data:f.value,stripe:"",border:"",style:{width:"100%"}},{default:(0,p.w5)((()=>[(0,p.Wm)(h,{label:"#",type:"index"}),(0,p.Wm)(h,{prop:"username",label:"用户名"}),(0,p.Wm)(h,{prop:"real_name",label:"姓名",width:"70"}),(0,p.Wm)(h,{prop:"department_name",label:"部门",width:"70"}),(0,p.Wm)(h,{prop:"leave_type",label:"请假类型",width:"90"}),(0,p.Wm)(h,{prop:"leave_reason",label:"请假原因"}),(0,p.Wm)(h,{prop:"leave_start",label:"开始时间"}),(0,p.Wm)(h,{prop:"leave_end",label:"结束时间"}),(0,p.Wm)(h,{prop:"audit_state",label:"审核状态"}),(0,p.Wm)(h,{prop:"options",label:"操作"},{default:(0,p.w5)((e=>[(0,p.Wm)(b,{type:"primary",size:"small",onClick:a=>H(e.row.id)},{default:(0,p.w5)((()=>[(0,p.Uk)("修改")])),_:2},1032,["onClick"]),(0,p.Wm)(k,{"confirm-button-text":"确认","cancel-button-text":"取消",icon:(0,s.SU)(m.WarnTriangleFilled),"icon-color":"red",title:"是否确定删除",onConfirm:a=>D(e.row.id)},{reference:(0,p.w5)((()=>[(0,p.Wm)(b,{class:"delete",type:"danger",size:"small"},{default:(0,p.w5)((()=>[(0,p.Uk)("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"]),(0,p.Wm)(q,{"current-page":(0,s.SU)(v),"onUpdate:current-page":a[0]||(a[0]=e=>(0,s.dq)(v)?v.value=e:v=e),"page-sizes":(0,s.SU)(_),"page-size":(0,s.SU)(w),"onUpdate:page-size":a[1]||(a[1]=e=>(0,s.dq)(w)?w.value=e:w=e),layout:"total, sizes, prev, pager, next, jumper",total:(0,s.SU)(W),onSizeChange:S,onCurrentChange:$},null,8,["current-page","page-sizes","page-size","total"]),(0,p.Wm)(Z,{title:"请假类型",modelValue:(0,s.SU)(g),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,s.dq)(g)?g.value=e:g=e),modal:""},{footer:(0,p.w5)((()=>[(0,p._)("div",c,[(0,p.Wm)(b,{onClick:a[3]||(a[3]=e=>(0,s.dq)(g)?g.value=!1:g=!1)},{default:(0,p.w5)((()=>[(0,p.Uk)("取 消")])),_:1}),(0,p.Wm)(b,{type:"primary",onClick:a[4]||(a[4]=e=>z())},{default:(0,p.w5)((()=>[(0,p.Uk)("确 定")])),_:1})])])),default:(0,p.w5)((()=>[(0,p.Wm)(Y,{model:(0,s.SU)(y).formData,ref_key:"leaveFormRef",ref:t},{default:(0,p.w5)((()=>[(0,p.Wm)(F,{prop:"leave_type",label:"请假类型","label-width":U.value},{default:(0,p.w5)((()=>[(0,p.Wm)(x,{modelValue:(0,s.SU)(y).formData.leave_type,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,s.SU)(y).formData.leave_type=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}}),v=t(89);const _=(0,v.Z)(f,[["__scopeId","data-v-5ae17ddc"]]);var w=_}}]);
//# sourceMappingURL=824.3667dfc9.js.map